<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>Freelancing Form</title>
  </head>
  <body>


    
    <div class="container mt-5">
        <h2 class="mb-4">Project Submission Form</h2>
        <form>
            <div class="row my-3">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="projectTitle">Project Title:<span class="required">*</span></label>
                        <input type="text" class="form-control" id="projectTitle" placeholder="Enter project title" maxlength="50" required>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="lookingFor">Looking for:<span class="required">*</span></label>
                        <input type="text" class="form-control" id="lookingFor" placeholder="e.g., Developer, Law Student" maxlength="50" required>
                    </div>
                </div>
            </div>

            <div class="row my-3">
                <div class="col-md-9">
                    <div class="form-group">
                        <label for="deliverables">Deliverables:</label>
                        <input type="text" class="form-control" id="deliverables" placeholder="e.g., Website, 3D Model" maxlength="50">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="deadline">Deadline:</label>
                        <input type="date" class="form-control" id="deadline">
                    </div>                    
                </div>
            </div>
            <div class="row my-3">
                <div class="col-md-9">
                    <div class="form-group">
                        <label for="compensation">Compensation:<span class="required">*</span></label>
                        <input type="text" class="form-control" id="compensation" placeholder="e.g., Money, Percentage Stake" maxlength="50" required>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="contact">Contact Information:<span class="required">*</span></label>
                        <input type="text" class="form-control" id="contact" placeholder="How to get in touch" maxlength="50" required>
                    </div>               
                </div>
            </div>

            <div class="form-group mt-3 mb-4">
                <label for="description">Project Description:<span class="required">*</span></label>
                <textarea class="form-control" id="description" rows="4" placeholder="Provide a detailed description of your project(maximum 1000 characters)" maxlength="1000" required></textarea>
            </div>



            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary">Submit</button>

        </form>
    </div>


    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>
    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->

    <script>
        
        document.querySelector("form").addEventListener("submit", function(event) {
            event.preventDefault(); // Prevents the default form submission action
            console.log("Test")
            // 1. Capture the form data
            const formData = {
                'Project Title': document.getElementById("projectTitle").value,
                'Seeking': document.getElementById("lookingFor").value,
                'Deliverables': document.getElementById("deliverables").value,
                'Deadline': document.getElementById("deadline").value,
                'Compensation': document.getElementById("compensation").value,
                'Project Description': document.getElementById("description").value
            };

            // 2. Use jsPDF to create a PDF
            
            const doc = jsPDF('portrait', 'mm', 'a5');

            doc.setFontSize(18);  // Reduced size for A5
            doc.setFont('helvetica', 'bold');
            doc.text('Looking for Help', 49, 20, { align: 'center' });  // Adjusted for A5

            // Horizontal line after the title
            doc.setDrawColor(0);
            doc.line(10, 25, 148 - 10, 25);  // Adjusted for A5

            // Section for project details
            doc.setFontSize(14);  // Reduced size for A5
            doc.setFont('helvetica', 'bold');
            doc.text('Details', 20, 35);  // Adjusted for A5

            doc.setFontSize(10);  // Reduced size for A5
            doc.setFont('helvetica', 'normal');

            let maxWidth = 90;  // Define the maximum width you want for the text
            let description = formData['Project Description'];
            // Assuming you've already captured the form data into `formData`
            let yOffset = 45;  // Adjusted for A5
            for (let label in formData) {
                const value = formData[label];
                if (value) {
                    if(value == description){
                        doc.setFont('helvetica', 'bold');
                        doc.text(`${label} :`, 10, yOffset);  // Adjusted for A5

                        let lines = doc.splitTextToSize(description, maxWidth);
                        doc.setFont('helvetica', 'normal');
                        for (let i = 0; i < lines.length; i++) {
                            doc.text(50, yOffset, lines[i], { align: 'justify' });  // X position remains constant, Y changes with each line
                            yOffset += 5;
                        }
                    }else{
                        doc.setFont('helvetica', 'bold');
                        doc.text(`${label} :`, 10, yOffset);  // Adjusted for A5
                    
                        doc.setFont('helvetica', 'normal');
                        doc.text(value, 50, yOffset);  // Adjusted for A5 and the longest label
                    
                    yOffset += 8;  // Adjusted for A5
                    }

                }
            }

            // Footer - Contact Information
            doc.setFontSize(12);  // Reduced size for A5
            doc.setFont('helvetica', 'bold');
            doc.text('Contact', 122, 185, { align: 'right' });  // Near the bottom of the A5 page and adjusted for A5

            doc.setFontSize(10);  // Reduced size for A5
            doc.setFont('helvetica', 'normal');
            let textWidth = doc.getStringUnitWidth(document.getElementById("contact").value)* 3;

            // Determine the starting X position
            // '148' is the width of an A5 page in portrait mode.
            let startX = 148 - textWidth;  // subtracting 10 for a margin

            // Print the text at the bottom right of the A5 page
            // '210' is the height of an A5 page in portrait mode.
            doc.text(document.getElementById("contact").value, startX, 190);  // subtracting 10 for a margin from the bottom
            // Save the PDF
            doc.save("project_info.pdf");
        });
    </script>
  </body>
</html>
